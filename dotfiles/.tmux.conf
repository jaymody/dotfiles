# prefix key
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# without this, hitting escape in programs like vim is slow
# (when it's set to 0, weird things happen in vscode integrated
# terminal so I'm just using a very small number)
set -sg escape-time 10

set -g default-terminal "tmux-256color"
set -as terminal-features ",tmux-256color:RGB"
set -g mode-keys vi
set -g mouse off
set -g history-limit 100000
set -g status-left-length 100 # don't cutoff session name
set -g base-index 1
setw -g pane-base-index 1

# undercurl support: https://github.com/folke/tokyonight.nvim/blob/057ef5d260c1931f1dffd0f052c685dcd14100a3/README.md?plain=1#L405
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

################
### bindings ###
################

# faster pane switching
bind space display-panes

# set current dir to dir of tmux session
bind g run-shell "tmux attach-session -t . -c \"$(tmux display -p '#{pane_current_path}')\"; tmux display-message \"Switched to: $(tmux display -p '#{pane_current_path}')\""

# copy mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi C-c send -X clear-selection
bind -T copy-mode-vi ] send -X next-prompt
bind -T copy-mode-vi [ send -X previous-prompt
bind -T prefix '\' copy-mode\;   send-keys -X previous-prompt\; send-keys -X previous-prompt
