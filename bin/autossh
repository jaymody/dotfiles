#!/bin/bash

if [ $# -eq 0 ]; then
    echo "Command requires 1 argument [user@host]"
    exit 1
fi

cd ${HOME}

if [ ! -f ".ssh/id_rsa.pub" ]; then
    echo "public key was not found at $HOME/.ssh/id_rsa.pub"
    echo "please generate one with:"
    echo "ssh-keygen -t rsa -b 4096"
    exit 1
fi

ssh $1 mkdir -p .ssh
cat .ssh/id_rsa.pub | ssh $1 'cat >> .ssh/authorized_keys'
